(this["webpackJsonpadmin-portal-web-app"]=this["webpackJsonpadmin-portal-web-app"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},40:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(3),c=n(31),i=n.n(c),l=(n(40),n(7));function o(){return Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"You found the Analytics page!"})})}var d=n(8);n(28);function r(){var e=Object(l.h)(),t=Object(l.g)(),n=(e.state||{from:{pathname:"/"}}).from,c=Object(s.useCallback)((function(){return t.push(n)}),[t]);return d.a.auth().onAuthStateChanged((function(e){e?(document.getElementById("btnLogout").classList.remove("hide"),document.getElementById("loginLink").classList.add("hide"),c()):(document.getElementById("btnLogout").classList.add("hide"),document.getElementById("loginLink").classList.remove("hide"))})),Object(a.jsxs)("div",{className:"loginContainer",children:[Object(a.jsx)("h1",{"data-testid":"loginHeader",children:"Admin Portal Log in"}),Object(a.jsx)("input",{id:"emailInput",type:"email","data-testid":"emailInput",placeholder:"Email"}),Object(a.jsx)("input",{id:"passwordInput",type:"password","data-testid":"passwordInput",placeholder:"Password"}),Object(a.jsx)("button",{id:"btnLogin","data-testid":"btnLogin",onClick:function(){var e=document.getElementById("emailInput").value,t=document.getElementById("passwordInput").value;d.a.auth().signInWithEmailAndPassword(e,t)},children:"Log in"})]})}var u=n(26),j=n(34);function b(e){var t=e.children,n=Object(j.a)(e,["children"]);return Object(a.jsx)(l.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){var n=e.location;return d.a.auth().currentUser?t:Object(a.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}}))}var h=n(10);n(52);function p(){return Object(a.jsxs)("div",{"data-testid":"home",children:[Object(a.jsx)("h1",{children:"Welcome to the Admin Portal"}),Object(a.jsxs)("div",{className:"linkContainer",children:[Object(a.jsx)(h.b,{to:"/lesson-packs","data-testid":"lessonLink",children:Object(a.jsxs)("div",{className:"linkChoice",children:[Object(a.jsx)("h2",{children:"Lessons Editor"}),Object(a.jsx)("img",{src:"https://github.com/shadopawn/admin-portal-web-app/blob/master/public/lessons.png?raw=true"})]})}),Object(a.jsx)(h.b,{to:"/analytics","data-testid":"analyticsLink",children:Object(a.jsxs)("div",{className:"linkChoice",children:[Object(a.jsx)("h2",{children:"Analytics Dashboard"}),Object(a.jsx)("img",{src:"https://github.com/shadopawn/admin-portal-web-app/blob/master/public/analytics.png?raw=true"})]})})]})]})}function O(){var e=Object(l.g)();return Object(a.jsxs)("div",{className:"navBar",children:[Object(a.jsx)(h.b,{to:"/lesson-packs",className:"navLink","data-testid":"lessonLink",children:Object(a.jsx)("h3",{children:"Lessons Editor"})}),Object(a.jsx)(h.b,{to:"/analytics",className:"navLink","data-testid":"analyticsLink",children:Object(a.jsx)("h3",{children:"Analytics Dashboard"})}),Object(a.jsx)(h.b,{to:"/login",className:"navLink",id:"loginLink","data-testid":"loginLink",children:Object(a.jsx)("h3",{children:"Login Page"})}),Object(a.jsx)("button",{id:"btnLogout",className:"hide logout navLink",onClick:function(){d.a.auth().signOut(),e.push("/admin-portal-web-app")},"data-testid":"btnLogout",children:"Log out"})]})}n(53),n(54);var m=n(11),x=Object(s.createContext)();var f=function(e){var t=Object(s.useState)([]),n=Object(m.a)(t,2),c=n[0],i=n[1],l=Object(s.useState)(),o=Object(m.a)(l,2),r=o[0],u=o[1];return Object(s.useEffect)((function(){!function(){var e=[];d.a.database().ref("/lesson_packs/").once("value").then((function(t){t.forEach((function(t){var n=[];t.child("lesson_pairs").forEach((function(e){console.log(e.child("calls").val()),n.push(e.val())}));var a={name:t.child("name").val(),lessonPairs:n,index:t.child("index").val()};e.push(a)})),i(e)}))}()}),[]),Object(a.jsx)(x.Provider,{value:{lessonData:c,setLessonData:i,currentLessonPack:r,setCurrentLessonPack:u,setVideoFileName:function(e,t,n){c.forEach((function(a){a===r&&(a.lessonPairs[e][t]=n)})),i(c),r.lessonPairs[e][t]=n,u(r)},uploadCurrentLesson:function(e){for(var t=0;t<e.lessonPairs.length;t++)d.a.database().ref("lesson_packs/lesson_pack"+e.index+"/lesson_pairs/lesson_pair"+t.toString()).update({call_video:e.lessonPairs[t].call_video,analysis_video:e.lessonPairs[t].analysis_video}),d.a.database().ref("lesson_packs/lesson_pack"+e.index+"/lesson_pairs/lesson_pair"+t.toString()+"/calls").update({false_call0:e.lessonPairs[t].calls.false_call0,false_call1:e.lessonPairs[t].calls.false_call1,true_call:e.lessonPairs[t].calls.true_call});d.a.database().ref("lesson_packs/lesson_pack"+e.index).update({name:e.name}),d.a.database().ref("lesson_packs/lesson_pack"+e.index).update({index:e.index})},setCallText:function(e,t,n){c.forEach((function(a){a===r&&(a.lessonPairs[e].calls[t]=n)})),i(c),r.lessonPairs[e].calls[t]=n,u(r)},setNameText:function(e){c.forEach((function(t){t===r&&(t.name=e)})),i(c),r.name=e,u(r)},addNewLessonPair:function(){r.lessonPairs.push({call_video:"Paceholder",analysis_video:"Placeholder",calls:{false_call0:"Placeholder",false_call1:"Placeholder",true_call:"Placeholder"}})}},children:e.children})};function v(e){var t=e.lessonPack,n=e.deleteItem,c=Object(l.g)(),i=Object(s.useContext)(x),o=i.setCurrentLessonPack,d=i.uploadCurrentLesson;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"packName",children:t.name}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){o(t),c.push("/lesson-creation")},className:"tableButton editButton","data-testid":"btnEditPack",children:"Edit"})}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){d(t)},className:"tableButton publishButton","data-testid":"btnPublishPack",children:"Publish"})}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{className:"tableButton deleteButton",onClick:function(){return n(t.name)},"data-testid":"btnPackDelete",children:"Delete"})})]})}function g(){var e=Object(s.useContext)(x),t=e.lessonData,n=e.setLessonData,c=Object(s.useState)(!1),i=Object(m.a)(c,2),l=i[0],o=i[1],d=t.map((function(e,s){return Object(a.jsx)(v,{lessonPack:e,deleteItem:function(){return function(e){if(window.confirm("Are you sure you want to delete "+e)){var a=t.filter((function(t){return t.name!==e}));n(a)}}(e.name)}},s)}));return Object(a.jsxs)("div",{className:"lessonPacks",children:[Object(a.jsx)("button",{className:"createButton",onClick:function(){t.push({name:"No name",lessonPairs:[],calls:{},index:t.length}),o(!l)},children:"Create Lesson Pack"}),Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:d})})]})}function k(){var e=Object(l.g)();return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"lessonPackHeading",children:"Lesson Packs"}),Object(a.jsx)(g,{}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{className:"standardButton",onClick:function(){e.push("video-uploader")},children:"Upload videos"})]})}var P=n(33);function N(e){return Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"standardButton",onClick:function(){return e.handleClick(e.name)},"data-testid":"btnVideo",children:e.name})})}n(29);function y(e){var t=e.show?"videoModal display-block":"videoModal display-none",n=Object(s.useState)([]),c=Object(m.a)(n,2),i=c[0],l=c[1];return Object(s.useEffect)((function(){e.show?d.a.storage().ref("training_videos/").listAll().then((function(t){t.items.forEach((function(t){l((function(n){return[].concat(Object(P.a)(n),[Object(a.jsx)(N,{name:t.name,handleClick:e.getNameOfVideo},t.name)])}))}))})).catch((function(e){console.log(e)})):l([])}),[e.show]),Object(a.jsx)("div",{className:t,children:Object(a.jsxs)("section",{className:"videoModal-main",children:[Object(a.jsx)("h2",{className:"heading",children:"What video would you like to add?"}),i,Object(a.jsx)("button",{className:"standardRedButton",onClick:e.hide,"data-testid":"closeVModal",children:"Close"})]})})}n(55);function C(e){var t=e.index,n=e.videoType,c=Object(s.useContext)(x).setVideoFileName,i=Object(s.useState)(!1),l=Object(m.a)(i,2),o=l[0],d=l[1],r=Object(s.useState)(""),u=Object(m.a)(r,2),j=(u[0],u[1]),b=function(){d(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(y,{show:o,hide:b,getNameOfVideo:function(e){j(e),b(),c(t,n,e)}}),Object(a.jsx)("div",{className:"videoSelector",children:Object(a.jsx)("div",{className:"addVideoButton",children:Object(a.jsx)("button",{className:"standardButton",onClick:function(){d(!0)},"data-testid":"btnAddVideo",children:"Add Video"})})})]})}function L(e){var t=e.index,n=e.callType,c=e.callBool,i=Object(s.useContext)(x),l=i.setCallText,o=i.currentLessonPack,d=n+t,r=o.lessonPairs[t].calls[n];return Object(a.jsxs)("div",{className:"call",children:[Object(a.jsxs)("p",{children:[c," call: "]}),Object(a.jsx)("input",{id:d,placeholder:r,className:"callTextbox",onChange:function(){var e=document.getElementById(d).value;l(t,n,e)},"data-testid":"callInput"})]})}n(30);function _(e){var t=e.index,n=e.lessonPair,s=e.rerender,c=e.render,i=e.deletePair,l=function(e,t){console.log("Lesson Pair "+e),console.log("Video Type "+t),s(!c)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("dt",{className:"lessonPairName",children:[Object(a.jsxs)("h3",{children:["Lesson Pair ",t+1]}),Object(a.jsx)("button",{className:"standardRedButton",onClick:function(){return i(t)},"data-testid":"btnDeletePair",children:"Delete"})]}),Object(a.jsxs)("dd",{className:"videoSelection",onClick:function(){return l(t,"call_video")},"data-testid":"btnCallSelection",children:[Object(a.jsxs)("div",{className:"videoNameDisplay",children:["Call Video: ",n.call_video]}),Object(a.jsx)(C,{index:t,videoType:"call_video"})]}),Object(a.jsxs)("dd",{className:"videoSelection",onClick:function(){return l(t,"analysis_video")},"data-testid":"btnAnalysisSelection",children:[Object(a.jsxs)("div",{className:"videoNameDisplay",children:["Analysis Video: ",n.analysis_video]}),Object(a.jsx)(C,{index:t,videoType:"analysis_video"})]}),Object(a.jsx)("dd",{children:Object(a.jsx)(L,{index:t,callType:"false_call0",callBool:"False"})}),Object(a.jsx)("dd",{children:Object(a.jsx)(L,{index:t,callType:"false_call1",callBool:"False"})}),Object(a.jsx)("dd",{children:Object(a.jsx)(L,{index:t,callType:"true_call",callBool:"True"})})]})}function B(e){var t=e.show?"videoModal display-block":"videoModal display-none";return Object(a.jsx)("div",{className:t,children:Object(a.jsxs)("section",{className:"videoModal-main",children:[Object(a.jsx)("h2",{className:"heading",children:"What would you like the name to be?"}),Object(a.jsx)("input",{id:"nameChangeInput","data-testid":"nameChangeInput"}),Object(a.jsx)("button",{className:"standardButton",onClick:e.changeName,children:"Submit"}),Object(a.jsx)("button",{className:"standardRedButton",onClick:function(){return e.hide(!1)},children:"Close"})]})})}function w(){var e=Object(s.useContext)(x),t=e.currentLessonPack,n=e.setNameText,c=e.addNewLessonPair,i=e.uploadCurrentLesson,o=Object(s.useState)(!1),d=Object(m.a)(o,2),r=d[0],u=d[1],j=Object(s.useState)(!1),b=Object(m.a)(j,2),h=b[0],p=b[1],O=function(e){t.lessonPairs.splice(e,1),u(!r)},f=[],v="No Lesson Pack Selected";return t?(f=t.lessonPairs.map((function(e,t){return Object(a.jsx)(_,{index:t,lessonPair:e,rerender:u,render:r,deletePair:O},t)})),v=t.name,Object(a.jsxs)("div",{style:{textAlign:"left"},children:[Object(a.jsx)("h3",{"data-testid":"packName",children:v}),Object(a.jsx)("button",{className:"standardButton",onClick:function(){return p(!0)},children:"Edit Name"}),Object(a.jsx)("button",{className:"standardPurpleButton",onClick:function(){c(),f=t.lessonPairs.map((function(e,t){return Object(a.jsx)(_,{index:t,lessonPair:e,rerender:u,render:r,deletePair:O},t)})),u(!r)},"data-testid":"btnAddPair",children:"Add Lesson Pair"}),Object(a.jsx)("button",{className:"standardPurpleButton",onClick:function(){i(t)},children:"Publish"}),Object(a.jsx)("dl",{children:f}),Object(a.jsx)(B,{show:h,hide:p,changeName:function(){var e=document.getElementById("nameChangeInput").value;n(e),p(!1),u(!r)}})]})):Object(a.jsx)(l.a,{to:"/lesson-packs"})}function I(){return Object(a.jsx)("div",{children:Object(a.jsx)(w,{})})}function S(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Upload Videos"}),Object(a.jsx)("input",{"data-testid":"btnUpload",type:"file",id:"fileButton",onChange:function(e){var t=e.target.files[0];d.a.storage().ref("training_videos/"+t.name).put(t).on("state_change",(function(e){var t=e.bytesTransferred/e.totalBytes*100;document.getElementById("uploader").value=t}),(function(e){}),(function(){}))}}),Object(a.jsx)("progress",{value:"0",max:"100",id:"uploader",children:"0%"})," ",Object(a.jsx)("br",{})]})}var E=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(O,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(b,{path:"/analytics",children:Object(a.jsx)(o,{})}),Object(a.jsx)(l.b,{path:"/login",component:r}),Object(a.jsx)(l.b,{path:"/admin-portal-web-app",component:p}),Object(a.jsx)(l.b,{exact:!0,path:"/",children:Object(a.jsx)(l.a,{to:"/admin-portal-web-app"})})]}),Object(a.jsx)(f,{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(b,{path:"/lesson-packs",children:Object(a.jsx)(k,{})}),Object(a.jsx)(b,{path:"/lesson-creation",children:Object(a.jsx)(I,{})}),Object(a.jsx)(b,{path:"/video-uploader",children:Object(a.jsx)(S,{})})]})})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};d.a.initializeApp({apiKey:"AIzaSyAtCRHSSIwa5UepmVBQE6sPAeqI28S3XRk",authDomain:"admin-portal-firebase.firebaseapp.com",databaseURL:"https://admin-portal-firebase.firebaseio.com",projectId:"admin-portal-firebase",storageBucket:"admin-portal-firebase.appspot.com",messagingSenderId:"718485621784",appId:"1:718485621784:web:cac547629a659e8cd1c76d",measurementId:"G-MS08DSSK4Y"}),i.a.render(Object(a.jsx)(h.a,{children:Object(a.jsx)(E,{})}),document.getElementById("root")),A()}},[[56,1,2]]]);
//# sourceMappingURL=main.14916ec1.chunk.js.map